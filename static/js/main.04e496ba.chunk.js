(this["webpackJsonpbikely-ui"]=this["webpackJsonpbikely-ui"]||[]).push([[0],{101:function(e,t,n){e.exports={FormHelperText:"input_FormHelperText__15xGU"}},253:function(e,t,n){},261:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(79),c=n.n(i),o=(n(253),n(32)),s=n(30),l=n(363),u=n(19),d=n.n(u),j=n(27),b=n(10),h=n(34),O=n(348),f=n(169),m=n(342),p=n(335),g=n(343),x=n(344),v=n(101),k=n.n(v),y=n(1),S=function(e){var t=e.id,n=e.name,r=e.errors,a=e.onChange;return Object(y.jsxs)(m.a,{fullWidth:!0,children:[Object(y.jsx)(p.a,{htmlFor:t,children:"Email"}),Object(y.jsx)(g.a,{type:"email",error:!!r,id:t,name:n,onChange:a,"aria-describedby":"email-input-field"}),Object(y.jsx)(x.a,{id:"FormInputHelperText",className:k.a.FormHelperText,children:r||""})]})},C=function(e){var t=e.id,n=e.errors,r=e.name,a=e.onChange;return Object(y.jsxs)(m.a,{fullWidth:!0,children:[Object(y.jsx)(p.a,{htmlFor:t,children:"Password"}),Object(y.jsx)(g.a,{type:"password",error:!!n,id:t,name:r,onChange:a,"aria-describedby":"password-input-field"}),Object(y.jsx)(x.a,{id:"FormInputHelperText",className:k.a.FormHelperText,children:n||""})]})},w=function(e){var t=e.id,n=e.name,r=e.errors,a=e.onChange;return Object(y.jsxs)(m.a,{fullWidth:!0,children:[Object(y.jsx)(p.a,{htmlFor:t,children:"Username"}),Object(y.jsx)(g.a,{error:!!r,id:t,name:n,onChange:function(e){return a(e)},"aria-describedby":"email-input-field"}),Object(y.jsx)(x.a,{className:k.a.FormHelperText,children:r||""})]})},P=n(345);var D=n(181),T=n(320),A=n(349),E=n(350),B=n(351),I=n(327),R=n(180),N=n(227),F=Object(N.a)({}),Q=Object(I.a)((function(){return{loginForm:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"start"},submitButton:{alignSelf:"flex-end",position:"relative"},formError:{maxWidth:300,height:25,alignSelf:"end",color:F.palette.error.main},header:{textAlign:"left",fontWeight:F.typography.fontWeightBold},buttonProgress:{color:R.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})),M=function(e){var t=e.formik,n=e.formError,r=e.loading,a=Object(h.a)(),i=Q(a),c=t.handleSubmit,o=t.errors,s=t.values,l=t.isSubmitting,u=t.handleChange,d=s.password,j=s.email;return Object(y.jsxs)("form",{className:"login",onSubmit:c,children:[Object(y.jsx)(D.a,{variant:"h5",className:i.header,children:"Login"}),Object(y.jsx)(T.a,{mb:2}),Object(y.jsxs)(A.a,{className:i.loginForm,children:[Object(y.jsx)(S,{errors:o.email,id:"email",name:"email",value:j,onChange:u}),Object(y.jsx)(C,{errors:o.password,id:"password",name:"password",value:d,onChange:u}),Object(y.jsx)("div",{id:"formError",className:i.formError,children:n}),Object(y.jsxs)("div",{className:i.submitButton,children:[Object(y.jsx)(E.a,{variant:"outlined",color:"primary",type:"submit",disabled:l,children:"Login"}),r&&Object(y.jsx)(B.a,{size:24,className:i.buttonProgress})]})]})]})},H=Object(I.a)((function(){return{loginForm:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"start"},submitButton:{alignSelf:"flex-end",position:"relative"},formError:{maxWidth:300,height:25,alignSelf:"end",color:F.palette.error.main},header:{textAlign:"left",fontWeight:F.typography.fontWeightBold},buttonProgress:{color:R.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})),L=function(e){var t=e.formik,n=e.formError,r=e.loading,a=Object(h.a)(),i=H(a),c=t.handleSubmit,o=t.errors,s=t.values,l=t.handleChange,u=t.isSubmitting,d=s.password,j=s.email,b=s.username;return Object(y.jsxs)("form",{className:"register",onSubmit:c,children:[Object(y.jsx)(D.a,{variant:"h5",className:i.header,children:"Register"}),Object(y.jsx)(T.a,{mb:2}),Object(y.jsxs)(A.a,{className:i.loginForm,children:[Object(y.jsx)(S,{errors:o.email,id:"email",name:"email",value:j,onChange:l}),Object(y.jsx)(w,{errors:o.username,id:"username",name:"username",value:b,onChange:l}),Object(y.jsx)(C,{errors:o.password,id:"password",name:"password",value:d,onChange:l}),Object(y.jsx)("div",{id:"formError",className:i.formError,children:n}),Object(y.jsxs)("div",{className:i.submitButton,children:[Object(y.jsx)(E.a,{variant:"outlined",color:"primary",type:"submit",disabled:u,children:"Register"}),r&&Object(y.jsx)(B.a,{size:24,className:i.buttonProgress})]})]})]})},z=function(e){return e?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e)?"":"Invalid email address":"Required"},U=function(e){return e?e.length<8?"Password too short":"":"Required"},Y=function(e){return e?e.length<5?"Username too short":"":"Required"},Z=n(224),X=n(138),K=n(139),W=function(){function e(){Object(X.a)(this,e)}return Object(K.a)(e,null,[{key:"registerObserver",value:function(t){e.observers.push(t)}},{key:"notifyObservers",value:function(){var t,n=Object(Z.a)(e.observers);try{for(n.s();!(t=n.n()).done;){(0,t.value)()}}catch(r){n.e(r)}finally{n.f()}}},{key:"removeObserver",value:function(t){var n=e.observers.indexOf(t);e.observers.splice(n,1)}},{key:"accessToken",get:function(){if(!e._accessToken){var t=localStorage.getItem("access_token");return t?(e._accessToken=t,t):""}return e._accessToken},set:function(t){localStorage.setItem("access_token",t),e._accessToken=t}},{key:"getProfile",value:function(){var t=Object(j.a)(d.a.mark((function t(){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._profile){t.next=2;break}return t.abrupt("return",e._profile);case 2:if(!((n=JSON.parse(localStorage.getItem("profile")))&&Object.keys(n).length>0)){t.next=6;break}return e._profile=n,t.abrupt("return",n);case 6:return t.next=8,e.fetchProfile();case 8:if(!(r=t.sent).ok){t.next=11;break}return t.abrupt("return",r);case 11:e.handleError();case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"profile",get:function(){if(e._profile)return e._profile;var t=JSON.parse(localStorage.getItem("profile"));return t?(e._profile=t,t):null},set:function(t){e._profile=t,localStorage.setItem("profile",JSON.stringify(t))}},{key:"fetchProfile",value:function(){var t=Object(j.a)(d.a.mark((function t(){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e.apiUrl+"/users/me",{method:"GET",mode:"cors",credentials:"omit",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken),"Access-Control-Allow-Credentials":!0}});case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,n.ok||(r.error=!0),e.profile=r,e.notifyObservers(),t.abrupt("return",r);case 13:t.prev=13,t.t0=t.catch(0),e.handleError(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}()},{key:"login",value:function(){var t=Object(j.a)(d.a.mark((function t(n){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e.apiUrl+"/auth/login",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:return r=t.sent,t.next=6,r.json();case 6:return a=t.sent,r.ok?e.accessToken=a.access_token:a.error=!0,e.fetchProfile(),t.abrupt("return",a);case 12:t.prev=12,t.t0=t.catch(0),e.handleError(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},{key:"logout",value:function(){e.accessToken="",e.profile="",e.notifyObservers()}},{key:"register",value:function(){var t=Object(j.a)(d.a.mark((function t(n){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.apiUrl+"/auth/register",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return r=t.sent,t.next=5,r.json();case 5:return a=t.sent,r.ok||(a.error=!0),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getUserBasedReservations",value:function(){var t=Object(j.a)(d.a.mark((function t(){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProfile();case 2:return n=t.sent,t.next=5,fetch("".concat(e.apiUrl,"/reservations/").concat("User"===n.role?"users":"rental_points/"+n.rentalPoint),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken)}});case 5:return r=t.sent,t.next=8,r.json();case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getBikes",value:function(){var t=Object(j.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.parse(n),t.next=3,fetch("".concat(e.apiUrl,"/bikes?reservationDate=").concat(r),{method:"GET",mode:"cors",credentials:"omit",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken),"Access-Control-Allow-Credentials":!0}}).then((function(e){return e.json()}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"postReservation",value:function(){var t=Object(j.a)(d.a.mark((function t(n){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e.apiUrl,"/reservations"),{method:"POST",mode:"cors",credentials:"omit",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken),"Access-Control-Allow-Credentials":!0},body:JSON.stringify(n)});case 2:return r=t.sent,t.next=5,r.json();case 5:return a=t.sent,r.ok||(a.error=!0),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getReservations",value:function(){var t=Object(j.a)(d.a.mark((function t(){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e.apiUrl,"/reservations"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken)}});case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,n.ok||(r.error=!0),t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getPresentRents",value:function(){var t=Object(j.a)(d.a.mark((function t(){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e.apiUrl,"/reservations/rents/present"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken)}});case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,n.ok||(r.error=!0),t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getRentalPoints",value:function(){var t=Object(j.a)(d.a.mark((function t(){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e.apiUrl,"/rentalpoints"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken)}});case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,n.ok||(r.error=!0),t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"confirmRent",value:function(){var t=Object(j.a)(d.a.mark((function t(n){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e.apiUrl,"/reservations/rent/").concat(n),{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken)}});case 2:return r=t.sent,t.next=5,r.json();case 5:return a=t.sent,r.ok||(a.error=!0),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"returnBike",value:function(){var t=Object(j.a)(d.a.mark((function t(n,r){var a,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e.apiUrl,"/reservations/return/").concat(r,"?rentalpoint_id=").concat(n),{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken)}});case 2:return a=t.sent,t.next=5,a.json();case 5:return i=t.sent,a.ok||(i.error=!0),t.abrupt("return",i);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"userHasAuthenticated",value:function(){return!!e.accessToken}},{key:"handleError",value:function(e){console.log(e)}}]),e}();W.apiUrl="https://coderscamp-bikely.herokuapp.com",W._accessToken="",W.observers=[];var q=Object(I.a)((function(){return{image:{margin:F.spacing(2),borderRadius:"calc(2 * ".concat(F.shape.borderRadius,"px)"),width:144,height:144,backgroundImage:"url(".concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV/TikUrDmYQdchQnSyIijhKFYtgobQVWnUwufQLmjQkLS6OgmvBwY/FqoOLs64OroIg+AHi5uak6CIl/i8ptIjx4Lgf7+497t4BQqPMNCswAWh61UzGolImuyp1vyKAXogIYlhmlhFPLabhOb7u4ePrXYRneZ/7c/SpOYsBPol4jhlmlXiDeGazanDeJxZZUVaJz4nHTbog8SPXFZffOBccFnimaKaT88QisVToYKWDWdHUiKeJw6qmU76QcVnlvMVZK9dY6578haGcvpLiOs0RxLCEOBKQoKCGEsqoIkKrToqFJO1HPfxDjj9BLoVcJTByLKACDbLjB/+D391a+alJNykUBbpebPtjFOjeBZp12/4+tu3mCeB/Bq70tr/SAGY/Sa+3tfAR0L8NXFy3NWUPuNwBBp8M2ZQdyU9TyOeB9zP6piwwcAv0rLm9tfZx+gCkqavlG+DgEBgrUPa6x7uDnb39e6bV3w87p3KRzS1lKQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+UECxQNM7mNFacAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAUmklEQVR42u2dZ3gUVRfH/9t3k00jEEITCC0gglIUMIAgEECa5LUgSDUgiIJRAoqASFdEpFdFFFReegtNEAmKdCmhJ5TQQsumbp/3Aw++wM6d3Q3ZZGb2/J6HD8ydmdyZ+98755577rkKVb12HAhCJijpFRAkaIIgQRMECZogSNAECZogSNAEQYImCBI0QZCgCRI0QZCgCYIETRAkaIIgQRMkaIIgQRMECZogSNAEQYIm/AI1vQJ58GY5K36qn+tyfMctDd45GoD0fP/ouxS06lv62Dvdc3vOP1kq1P89mEwOQryU0Ts9EjMA1A124EobEwmaECdaJee1QMvonZhbN48ETYiPmc/kF+i6+IoWBKvla2XSoNBDjGoO4VoONYMcqGV0oKze+aTDlye6ul9Fi6stzQExe4JxMFMFAPhvw1y8Wsbqct7Sernost9IgvY3Khic2B2TjTI6JzQS+JZV2haKG5b//1BeOxCI754DelZ4VNTNS9rJ5PAn4spakdk+E2mtTXjKIA0xA3hEzA8Yf8bgckyvIpPDLwjXcjjWwoTSOuk1uMXJb8JYucI2dqiHlgSvRNpws22mJMUMADolh1I6V7v+i2jXwWO+Q76Sph4awNTa+RgaZfboXKsTuJCrQoa1eEXRPNzVDr4ea4J6fdi//x9Q0eJiPwNA8h01CVquLHg2D32fsgie0+4vI5LvqkXVs82tm4d4Pk+HBxMt3Q8FkskhR5qUsDPFbHUCHfcZoV4fhu23NKL7TH98wlCg65ala5FlV5Cg5UagisPumGzeskt5SgRsDENShka09c91KFBtR4hX11w3K9HrcKCs29VvBX22VRbvaP+2VYEqXgqluEjLU0K9Pgw2D+Z4LuQqUWFbiOzb1S8F/XyYHaV1/CoosyVUcs9j3BSGYSf5TZAMiwKlt4Sixm8hftG2fhM+2quCBWOjzShv4BeygwN0G8Kk36AAQjQc7ByQa1fA32KDZe/l0CqBQ82zUDPIIfypUgANQ+04kCntV8IByLQp4K/I3uTI63DPrZgf9Gx/NctGozA7CBK0KDnWIsvra5KbZpMqSNAifDAFUMuDnpkPvrV5BAm6WPlvwxze4wknAqBeHwb1+jDU3hnMa2++Wc5KyiBBi4uWPDG/k8/pMSNV9+//T+eoUJXhc1YrSBwkaBFh4In5XXBR53Is06aAg8e39QINDknQYoLjPO91lTzHcx0kDhK0iMjlCSZawWNXv1TSxjsF/o+JImtJ0CJi0SVX8+LZEAd+bZCLMnonlAqgQ6QNO5q4itzBAZR9R5rIeurb0yQsj/PleT0+TTGQOqiHFhc7bxfMbCAxk6BFSZs/g3A2R+XVNeW3hpAqSNDipdbOYCxL17o9z2RTQL0+DDcstG6YBC1yeh0ORNUdIdh+SwMrIxg+RMOhgsFJiqBBofR4yuBEamv+RIeGDWGwkYuDemgpcTlfiXXX+c2Qe+3vkSpI0NLjzYOBvOaHXgXcaJuJSD2ZHyRoCWHjgNo7+TPal9RySG9jwsw6eRSkRIKWDql5Krx1kL2sf2AlC8wd72F7kxxUCXTyxnwQNCgUHbWCHAVa3eJrsu0KHMtSIeFEAA5lqkitJGjPidQ5kR4r7j1IcuwKLEvXIuGEgZltlEwOAgBww3I/acva6+LNlmRUcxhQyYLcDpn4sR4tE6Me2kPKG5zY3CinwGsSi5KX9gbJOpsoCbqQGVvDjEFRZoSoOdEOCpNuatDxbyM1FgnaixcFIEjNQaMENErO5+68cC2HigFODK5s5l0f+Thnc1SotTOY2okELQ3K6p2Y8nQ+ugmsSCdR06BQMlwzK/H2oUCEbw5FSja/C6+60YFptfNJ0IR0MNkVqLMrGLNSdbzlH0SZUSXQSYImpMXQEwGIY2yeeeZlEwmakB7rbmiw4Qa/33xJvVzUC/G/3CI0KJQBd9tnCu7fvS1Dg877jR5l+qcemihWRlQzu92Mvk2EDfkd7vnFihwStIQZUMmC8TU992qktTbJeltkErSEiTY6MLtOntfXpbbKIkET4mPhs2wx789Uw8TYizBC58TTQfJN3EdRLRKlcQlXD8bxLBWe+/3/M4U1jA6cbOnaIy9vkIu6u+Q5o0g9tAQxMgaBD4sZAM7kqPAWzzbIlQPkOzgkQUuQpjwb19+18psYu265+qnlPDAkQUuQMzzpzUpo+UVakmeDUTn7o0nQEiQ1l7/ZPqlmdjn2x4uuu3ply3jzehoUSpRMmwKhmkd75XE18/F0sANz03Qoo3dixjN5COPpuUeekm92VZr6lig9K1jx3XPeryt0coBWBltAk8khM5Ze0fJuu+GOxJQAWb8XErSEidziXS7rSef0mH5BR4ImxEm+435O6ztW4Z7awQGd/jZi1Cn570zgV4PCUloOrSJsaBthQ0kth6QMDbbe1OBcrnR/13FlrAjnGfhlWJQ4kaVCYooBR03+k3XJLwaFeiWQ00E4Te7Le4OwW2L5LSoHOHGuFf/qFPX6MPgjsjc5mobb3YoZAH57MVuU+e0KIubBxwLgr8ha0FGBTuzimVhgUSvIgR8kkGJrWDUzU8zZdgXmX9SRoOXIX02973G7l7eiYag4wyufD7PjaqwJkxhB/Q4OCNsc6tebhspW0K+X5R8sOTngnywVFl/WMaeAl9bPKfb6axT3o+oidU4kVjXD3uke/myajdI6/kAMqxPQbQiDvyPbQeGVNiaU4dlWwrgxFOaHUtH+2iAXcWWtkn/ewI1hsNAuGvLtoR+Pc3jgyTA/llf5DYEM/lIg+Y4ahg0kZtkLmi/ml5VCy93EhBjJtivQ/VAgXtobRNvQPYRsJ1Yszvv+54epZnTg1l3XRw7XSkcR181KjD2jx6JLOlKvPwk6x66A/jGh/hGT7TLhIIVM+A4OSDxpwLepelKsvwp69CkD5tR1XRmd2T4TK65pcSVfgTfK2hDNswI6y65ApW3Fu4m91QkXe5/wYy8H4D5FFotX9xuZOeMIGhQWG7F/er9Nw8lsFYmZBC1ODmSq0f2Q5265u1aFbPNVkKBlwq9Xtai6w709/NkpAyK2hJIiyIaWDlGBTnSOtKJpuANl9Q5cylNh+VUtkm5qeDeyJ0jQBEEmB0GQoAmCBE2QoAmCBE0QJGiCIEETBAmaIEETBAmaIIoY2QX463VavBUbgyrlI7Hv+Fls2HPQ7TVfD+nFe9xmd2DE7J9k825Yz5mTb8aYBb/K4hllFctxYc1shBhd02AdPHUBbT8Yz7zu9vbveY+bLVaU7zBANoJmPecdUzZq/OcDMjnExMrJH/OKGQAa1KyCSmVK0feYTA7PWTxqUIGuczo5XM24gysZd3D5xm2kXbuJi9duwe7wLh3XM1WfEiyfNLgHuo38hlqcB44jQbvQuVnDQq1YVm4e2g6ZgLOXrnl0vkop/LEJDjCQcll2p4zW4orW5AgODMCfiyYgde1sBHkgxqu37gr30D+sIeX6QQ8tehs6ODAAaevmIDJceHlUx4RJ4Bgtk3HPhOSjp0i5ftBDS8Ztt3v+F4Ij8azcfJR7pT+G9+yCJnVqAFAgz2zBhj0HsGTj76RasqELB7PFios3bvH3DFAgQK9FeEgQAvTCqa3CQ4Lw/uvtMXPFZuY5Vpsd4xavJIVSD+07Tl28itaDv/Do3LOrZqJEMDuXRq8OzQUFTRA+t6E5L/LJV497H2cvs70alcpEUIsRxWxDe2mfNek3kjmj5Y6kbz/jPX47Mwtvj5nh08d8t2sbdG7+PLO8x6jpuJPlfmeAnu2bo3u7ZqgfHcUcK2xKPoT5a7bhxIUrPrWhpyf0QY2K5ZgN227IhEJpH6vdjs4fTZaIoIvQPmtYqwrvcXcuvSelc7OGGD+wG7O8+6hvBcUcoNfh8/jX0bdTS7d/KzjQgG6xMegWG4OMuyY06TcSmTm+yaA6fNZPuLppAbM80KBDbr7Fo3s1ql2d2T5rdv0tHZNDAXln0Hy2eiXBWdIPpi7G1n1HmeXlI0rg8oZ5Hon5cSJKhOD8mllo9Ex1nwwKLVYbbmeydxH7fvRgz38cvbowy+InzpOOoL2ukMCMX1ZuvqjqWj+6CnbMHsMs/3DaEizfmswsDwsKxJGfvn7iemyc9gm6t2vqk2ecsnQt2zys4/kP6cW60bzHLzE8YLIR9KkV05llv2xLFk0960VHYevMz5jln85Zhh+Tdgve48Qv3xSay+zbhL6CHqKC8v2GncwyvVaL4ED3m3wG6nVQMh70qx/XS8zL4aHXvl50FC6smY3wkCD+gYPNjk/nLBeFmCuXjcC2maOY5dN/2YQFa3YI3mPf95Og07LT9k74fjVKtu7zyL9Xhk6EKSePec2ueWMLdVD4gFU79zHL3uns3lRaMmZwkXVSPh8U1ouOKrDX4mFe6POJKMQcHGjAgR+mMMt/3pqM8W4md4wBelQtH8nsACp1Hsg72Pr75DlUefU97FkwDjUrl3cpL1eqBLQaNaw2e6E+87jFKxHXshH/l6hPHKYt3yh4feM6NXiPb957uPBNVikMvErH9sOVm7eLvR4Beh1S185hlq/Y8Sfen7rY7X0SundklrUbMtGt56Bpf/bXYfusMYU2KHxAesYdwS+tUPBYiDEAesaXaNKS1f4j6LELV6BOtwSUbN0HDqdTFGJOExDz6l37MGjKQo/uNSgulll28NR5j+4xc0US7/GKkSUL3eQAgK6JXzHLXompJ2CStGKPly5e9R9Bj4l/HUeXTcXMYf2g1RRvDJVapcLZlTOgUvG/rl0HT6D/xPle3Y8PIffe4yzd9DvTnGHdn91Fuz9l77HT7M6n/xvMsk96v8oYNPtmPCTqaDulUolubWLQrU0M2g2ZgAMp54ulHudWz4Rep2WWexNrHWpkb5Hx24HjTPeWN+h1GuTkOQpTz3A6OST/cxoxPPVjDeSNAext6JZv3SNNQadn3MH8NdvZL1+jQc3K5RBTtyZKhQVDwTDokr4diZYDP8ex85eKTMgKhQJXNs6HQUDMALBt5iiUbtsPDod70yiiBHt7jC/ff7tQ6q3xsof2NHy0y8dTmAP8uJaNXLwh7Zo8x3uuze5ATp5ZmoLOuGvC3JVbPeyRFZg3YgC6tniBf8AzezRKx/YrMkELudUeZ+1Xw9ExYZL7AW647/c/VKtVPrv3tVt3UbZUCZfj8V1auQh64sC3eO/RoGei777qvu/mPD/V6eTQf+I8HDvH3wurlEqMYNhkxU3jZ6qjeb2n3Z6Xb7b6vjJeBoR5M7nz0fSl/CKt6RqnEcYz0eNwOn0aW6MU28sFgCHT2H7reIFRs88fheMwcDI7WOeXCUPd3uNWZpbP62nzcsW8N020ff8/TBfewyvvWX7r3w+d9O3XSYy93XEBOznQUHybtjcfMBopaekY2TcO5SPCXW1XtRobvh6BjgKhkBl3TYKei8Nn0p64ntl5+T7tdJZt2YMe7Zq5HJ+e0AcvD7o/W9m7Qwvea3v6OIzX54JWFCBYQegar11ShUTXxK+QkpYOAHi2+8fMwVHjOjUEwyrzLWyTo3Pz55Ew/YcifzZvmyhxxo+8gn44droxTwRgdm4+LIU8i1nkJgdXgBWY7/2HPfFgsdqKvMH7jZ+DP46kPHJs3uptzPMvrZ8n+KNkrcoRmlXj9Waoi+cDa7XbcY3HDn5Q99Agftfklz+u83ndRDUofNA7f9onjj2osliLtPFGzPoJ63YfcDn+2dyfBWMmvhOIkRbqhVdNGeZRvZrUqYHrSQtxddMCfNY3zq1rUQh3C5R5O50vF/Eef6N1E3z1Ab/7ce6qrTIQtIcdtFajxhutX0TG1sWCM4NF8St/gNlixaJ1vzHLYwUSQHZs2gC1q/CnJ9t3/CzzuhdqV8PcEf0F6/Vi3Wis/3oEgPuuxaHdOuDKxvlIWzcHXQSWgbEw6LTQeOnq28PIczI7MZ7X23P07MUiaTPJRNsB9916CwQmaYr6t3j8/CWcvnQN0RXL8o/o541FydZ9eMt6j53FDKt87eXGeO3lxlj/xwGMW7wS2XlmaNQq1K9ZBYtHDmROwQcFGHBGIHWa0+lkLqC4nrQIP29Nxo4DxxBVLhIj+3RFpU4DkZPPngCZuGQ1Pu3d1eU4X1x24oyl8hB0YfLu5PlF+vc8sZZeGjAa15MWMm3m70a9h77jZrsc35h8CCcuXEHtKhWY9+7UrCE6eZEz8GTqFZy6mC7Qq55G83q1mOUP1ip6at7NWpHEK2g+CsN7Iw6To5BI+GYJVhfiYsrCwu5wIH7CPAFRNkBJRqzDS++OxsXrhbMEKc9sQcuBnwueM+kHz8M1rTa72yhHq82OC+k33N5r4dodRdYeohd0ZnYunusxDEs37xZtHdfu3o/LN9jx2keWTWX24A16JmLFjr+e6O+npKWjcudBbgV4MOUCUq/e9Oieng6+W7j5EQHAhO9W+beg75iysfvwSTzV8V1U7TpYFMH97hAKujfotJg8uDuzfNCUBSjbPv5fP7en3DXloNNHk9Gs/yiPY8af7z0CadfcizrjnsnjL8NNgckiU06eoB1e6GainLakkAuR4aH4ZeKHqB31qJeE4zhs3HsIi9f9huSjp5/473zzYW+83b75o3b2kRS8OXI6LDbP/f1xLRph/qf8W3f0GD0DW/46QoImpMO6qcOZcdwsL4/fDwoJ8cIS886DJ4q8LiRo4omYMzyeWTZg0nwSNCEuEnt0ZgYvlQg24vVWTZiDynseJKckQRNFysdvd0L6xvvxIg8wGvSYOzweZ1fNZF736rAvi6W+amoygkV4SBCUSiV0WiWGduuAod06eHTd7sMpglPw1EMTxcKmbwqWrerNkdOKrc4kaIJfGAoFohjpylg4HE5ExPaDze4gQRPiwslxSEn1fOYy32xF6bb94CzmLFc0sUIIUiosGB+91RHvdOFfnLznyCmMmL0MZy5dFUV9SdCEvEwlegUECZogSNAEQYImCBI0QYImCBI0QZCgCYIETRAkaIIETRAkaIIgQRMECZogSNAECZogSNAEQYImCBI0QZCgCb/gf8QMufnVe0cxAAAAAElFTkSuQmCC",")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}}})),J=function(e){var t=e.children,n=Object(h.a)(),r=q(n);return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:r.image}),t]})},V=n(87),G=Object(V.a)((function(e){return{container:{minHeight:"calc(100vh - 64px)",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"},paper:{width:450,padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),_={email:"",password:""},$=function(){var e=Object(h.a)(),t=G(e),n=Object(s.g)(),i=Object(r.useState)(_),c=Object(b.a)(i,2),o=c[0],l=c[1],u=Object(r.useState)(_),m=Object(b.a)(u,2),p=m[0],g=m[1],x=Object(r.useState)(""),v=Object(b.a)(x,2),k=v[0],S=v[1],C=a.a.useState(!1),w=Object(b.a)(C,2),P=w[0],D=w[1],T=function(){var e=Object(j.a)(d.a.mark((function e(t,r){var a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.setSubmitting,S(""),P||D((function(){return!0})),e.next=5,W.login(t);case 5:(i=e.sent).error?(401===i.statusCode?S("Invalid credentials"):(S("Something went wrong"),console.table(i)),a(!1)):W.userHasAuthenticated()&&n.push("/"),D((function(){return!1}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=Object(f.a)({initialValues:_,validate:function(e){var t=p,n=!0;for(var r in o.email!==e.email?t.email=z(e.email):(o.password!==e.password||(t.email=z(e.email)),t.password=U(e.password)),t)0!==t[r].length&&(n=!1);return g(t),l(e),n?null:t},onSubmit:T});return Object(y.jsx)("div",{className:t.container,children:Object(y.jsx)(J,{children:Object(y.jsx)(O.a,{className:t.paper,children:Object(y.jsx)(M,{formik:A,formError:k,loading:P})})})})},ee=Object(V.a)((function(e){return{container:{minHeight:"calc(100vh - 64px)",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"},paper:{width:450,padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),te={email:"",password:"",username:""},ne=function(){var e=Object(h.a)(),t=ee(e),n=Object(s.g)(),i=Object(r.useState)(te),c=Object(b.a)(i,2),o=c[0],l=c[1],u=Object(r.useState)(te),m=Object(b.a)(u,2),p=m[0],g=m[1],x=Object(r.useState)(""),v=Object(b.a)(x,2),k=v[0],S=v[1],C=a.a.useState(!1),w=Object(b.a)(C,2),P=w[0],D=w[1],T=function(){var e=Object(j.a)(d.a.mark((function e(t,r){var a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.setSubmitting,S(""),P||D((function(){return!0})),e.next=5,W.register(t);case 5:if((i=e.sent).error){e.next=13;break}return e.next=9,W.login(t);case 9:e.sent.error?(S("Something went wrong"),a(!1)):W.userHasAuthenticated()&&n.push("/login"),e.next=15;break;case 13:400===i.statusCode&&Array.isArray(i.message)&&S(i.message[0]),S("Something went wrong");case 15:S("Something went wrong"),console.table(i),a(!1),D((function(){return!1}));case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=Object(f.a)({initialValues:te,validate:function(e){var t=p,n=!0;for(var r in o.email!==e.email?t.email=z(e.email):o.password!==e.password?t.password=U(e.password):(o.username!==e.username||(t.email=z(e.email),t.password=U(e.password)),t.username=Y(e.username)),g(t),l(e),t)0!==t[r].length&&(n=!1);return n?null:t},onSubmit:T});return Object(y.jsx)("div",{className:t.container,children:Object(y.jsx)(J,{children:Object(y.jsx)(O.a,{className:t.paper,children:Object(y.jsx)(L,{formik:A,formError:k,loading:P})})})})},re=n(340),ae=n(352),ie=n(353),ce=n(354),oe=n(355),se=n(356),le=n(357),ue=Object(V.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})),de=[{id:"dateFrom",numeric:!1,disablePadding:!0,label:"Planned pickup"},{id:"dateTo",numeric:!1,disablePadding:!1,label:"Planned return"},{id:"from",numeric:!1,disablePadding:!0,label:"From"},{id:"to",numeric:!1,disablePadding:!1,label:"To"},{id:"email",numeric:!0,disablePadding:!1,label:"User email"},{id:"bike_type",numeric:!1,disablePadding:!1,label:"Bike type"},{id:"bike_isElectric",numeric:!1,disablePadding:!1,label:"Bike is electric"},{id:"bike_frameSize",numeric:!1,disablePadding:!1,label:"Bike frame size"}],je=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),n=t[0],a=t[1],i=ue(),c=function(e){return e.sort((function(e,t){return e.plannedDateFrom-t.plannedDateFrom}))};return Object(r.useEffect)((function(){Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.getUserBasedReservations({userId:!0});case 2:(t=e.sent)&&t.length>0&&a(c(t));case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(y.jsx)("div",{className:i.root,children:Object(y.jsx)(O.a,{className:i.paper,children:Object(y.jsx)(ae.a,{children:Object(y.jsxs)(ie.a,{className:i.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table",children:[Object(y.jsx)(ce.a,{children:Object(y.jsx)(oe.a,{children:de.map((function(e,t){return Object(y.jsx)(se.a,{children:e.label},t)}))})}),Object(y.jsx)(le.a,{children:n.length>0?n.map((function(e){return Object(y.jsxs)(oe.a,{children:[Object(y.jsx)(se.a,{children:new Date(e.plannedDateFrom).toDateString()}),Object(y.jsx)(se.a,{children:new Date(e.plannedDateTo).toDateString()}),Object(y.jsx)(se.a,{children:e.rentalPointFrom_id.location}),Object(y.jsx)(se.a,{children:e.rentalPointTo_id.location}),Object(y.jsx)(se.a,{children:String(e.bike_id.isElectric)}),Object(y.jsx)(se.a,{children:e.bike_id.type}),Object(y.jsx)(se.a,{children:String(e.bike_id.isElectric)}),Object(y.jsx)(se.a,{children:e.bike_id.frameSize})]},e.id)})):Object(y.jsx)(oe.a,{children:Object(y.jsx)(se.a,{children:"Nothing to display"})})})]})})})})},be=Object(V.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),he=function(){var e=be();return Object(y.jsxs)(re.a,{alignItems:"center",justify:"center",style:{minHeight:"100vh"},container:!0,spacing:0,children:[Object(y.jsx)(re.a,{item:!0,xs:2}),Object(y.jsx)(re.a,{item:!0,xs:8,children:Object(y.jsx)(O.a,{className:e.paper,children:Object(y.jsx)(je,{})})}),Object(y.jsx)(re.a,{item:!0,xs:2})]})},Oe=[{id:"confirm",numeric:!1,disablePadding:!0,label:""},{id:"dateFrom",numeric:!1,disablePadding:!0,label:"Planned pickup"},{id:"dateTo",numeric:!1,disablePadding:!1,label:"Planned return"},{id:"email",numeric:!0,disablePadding:!1,label:"User email"},{id:"bike_type",numeric:!1,disablePadding:!1,label:"Bike type"},{id:"bike_isElectric",numeric:!1,disablePadding:!1,label:"Bike is electric"},{id:"bike_frameSize",numeric:!1,disablePadding:!1,label:"Bike frame size"}],fe=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),n=t[0],a=t[1],i=ue(),c=function(e){return e.sort((function(e,t){return e.plannedDateFrom-t.plannedDateFrom}))};function o(e){var t="BUTTON"===e.target.tagName?e.target:e.target.closest("button");e.preventDefault(),a(n.filter((function(e){return e._id!==t.value})))}return Object(r.useEffect)((function(){function e(){return(e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.getUserBasedReservations();case 2:(t=e.sent)&&t.length>0&&a(c(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(function(){return e.apply(this,arguments)}())}),[]),Object(y.jsx)("div",{className:i.root,children:Object(y.jsx)(O.a,{className:i.paper,children:Object(y.jsx)(ae.a,{children:Object(y.jsxs)(ie.a,{className:i.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table",children:[Object(y.jsx)(ce.a,{children:Object(y.jsx)(oe.a,{children:Oe.map((function(e,t){return Object(y.jsx)(se.a,{children:e.label},t)}))})}),Object(y.jsx)(le.a,{children:n&&n.length>0?n.map((function(e){return Object(y.jsxs)(oe.a,{children:[Object(y.jsx)(se.a,{children:Object(y.jsx)(E.a,{value:e._id,variant:"contained",color:"primary",onClick:o,children:"Confirm"})}),Object(y.jsx)(se.a,{children:new Date(e.plannedDateFrom).toDateString()}),Object(y.jsx)(se.a,{children:new Date(e.plannedDateTo).toDateString()}),Object(y.jsx)(se.a,{children:e.user_id.email}),Object(y.jsx)(se.a,{children:e.bike_id.type}),Object(y.jsx)(se.a,{children:String(e.bike_id.isElectric)}),Object(y.jsx)(se.a,{children:e.bike_id.frameSize})]},e._id)})):Object(y.jsx)(oe.a,{children:Object(y.jsx)(se.a,{children:"Nothing to display"})})})]})})})})},me=function(){var e=be();return Object(y.jsxs)(re.a,{alignItems:"center",style:{minHeight:"100vh"},container:!0,children:[Object(y.jsx)(re.a,{item:!0,xs:2}),Object(y.jsx)(re.a,{item:!0,xs:8,children:Object(y.jsx)(O.a,{className:e.paper,children:Object(y.jsx)(fe,{})})}),Object(y.jsx)(re.a,{item:!0,xs:2})]})},pe=n(18),ge=n(362),xe=n(331),ve=n(326),ke=n(322),ye=n(361),Se=n(334),Ce=n(321),we=n(23),Pe=n(328),De=n(358),Te=n(359),Ae=n(29),Ee=n(329),Be=n(149),Ie=Object(V.a)((function(e){return{root:{minWidth:120,padding:10,height:"100%",display:"flex",flexDirection:"Column"}}})),Re=n(336),Ne=function(e){return Object(y.jsx)(Re.a,{value:e.id,children:e.location})},Fe=function(e){var t=e.bikes,n=e.formValues,a=e.onBikeTypeChange,i=e.onIsElectricSwitchChange,c=e.onFrameSizeChange,o=e.onPickupLocationChange,s=e.onReturnLocationChange,l=e.onStartDateChange,u=e.onEndDateChange,d=e.createReservationRequest,j=Object(h.a)(),O=Ie(j),f=new Set(t.map((function(e){return e.type}))).add(""),g=new Set(t.map((function(e){return e.frameSize}))).add(""),v=new Set(t.map((function(e){return e.rentalPoint})).filter((function(e,t,n){return n.findIndex((function(t){return t.id===e.id}))===t}))).add({id:"",location:""}),k=Object(r.useState)({rentTo:!1,startDate:!1,endDate:!1,selectedBikes:!1}),S=Object(b.a)(k,2),C=S[0],w=S[1],P=function(){var e=Object(pe.a)({},C),t=!0;return n.rentTo?e.rentTo=!1:e.rentTo=!0,n.startDate?e.startDate=!1:e.startDate=!0,n.endDate?e.endDate=!1:e.endDate=!0,w(Object(pe.a)({},e)),Object.values(e).forEach((function(e){e&&(t=!1)})),!!t};return Object(y.jsxs)(T.a,{className:O.root,children:[Object(y.jsxs)(m.a,{children:[Object(y.jsx)(p.a,{id:"bike-type-select",children:"Bike Type"}),Object(y.jsx)(Pe.a,{labelId:"bike-type-select",id:"bike-type-select",value:n.selectedBikeType,onChange:a,children:Object(we.a)(f).map((function(e){return function(e){return Object(y.jsx)(Re.a,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)})}(e)}))})]}),Object(y.jsx)(De.a,{control:Object(y.jsx)(Te.a,{checked:n.isElectric,onChange:i,name:"isElectric"}),label:"Electric Engine"}),Object(y.jsxs)(m.a,{children:[Object(y.jsx)(p.a,{id:"frame-size-select",children:"Frame Size"}),Object(y.jsx)(Pe.a,{labelId:"frame-size-select",id:"frame-size-select",value:n.selectedFrameSize,onChange:c,children:Object(we.a)(g).map((function(e){return t=e,Object(y.jsx)(Re.a,{value:t,children:t});var t}))})]}),Object(y.jsxs)(m.a,{children:[Object(y.jsx)(p.a,{id:"rent-from-select",children:"Pickup location"}),Object(y.jsx)(Pe.a,{labelId:"rent-from-select",id:"rent-from-select",value:n.rentFrom,onChange:o,children:Object(we.a)(v).map((function(e){return Ne(e)}))})]}),Object(y.jsxs)(m.a,{required:!0,error:C.rentTo,children:[Object(y.jsx)(p.a,{id:"rent-to-select",children:"Return Location"}),Object(y.jsx)(Pe.a,{labelId:"rent-to-select",id:"rent-to-select",value:n.rentTo,onChange:s,children:Object(we.a)(v).map((function(e){return Ne(e)}))}),C.rentTo&&Object(y.jsx)(x.a,{children:"Select return location"})]}),Object(y.jsxs)(Ae.a,{utils:Be.a,children:[Object(y.jsxs)(m.a,{required:!0,error:C.startDate,children:[Object(y.jsx)(Ee.a,{label:"Reservation start date",value:n.startDate,onChange:l,disablePast:!0,showTodayButton:!0,ampm:!1,autoOk:!0,format:"dd MMMM yy HH:MM",margin:"normal",inputVariant:"standard"}),C.startDate&&Object(y.jsx)(x.a,{children:"Select date"})]}),Object(y.jsxs)(m.a,{required:!0,error:C.endDate,children:[Object(y.jsx)(Ee.a,{label:"Reservation end date",value:n.endDate,onChange:u,disablePast:!0,minDate:n.startDate,ampm:!1,autoOk:!0,format:"dd MMMM yy HH:MM",margin:"normal",inputVariant:"standard"}),C.endDate&&Object(y.jsx)(x.a,{children:"Select date"})]})]}),Object(y.jsxs)(m.a,{error:C.selectedBikes,children:[Object(y.jsx)(E.a,{variant:"contained",color:"primary",onClick:function(){P()&&d()},children:"Create Reservation"}),C.selectedBikes&&Object(y.jsx)(x.a,{children:"Select bike"})]})]})},Qe=n(341),Me=n(333),He=n(337);function Le(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function ze(e,t){return"desc"===e?function(e,n){return Le(e,n,t)}:function(e,n){return-Le(e,n,t)}}function Ue(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((function(e){return e[0]}))}var Ye=[{id:"type",numeric:!1,disablePadding:!0,label:"Bike type"},{id:"isElectric",numeric:!1,disablePadding:!1,label:"Has electric engine"},{id:"size",numeric:!0,disablePadding:!1,label:"Frame size"},{id:"pickupLocation",numeric:!1,disablePadding:!1,label:"Pickup location"}];function Ze(e){var t=e.classes,n=e.order,r=e.orderBy,a=e.onRequestSort;return Object(y.jsx)(ce.a,{children:Object(y.jsxs)(oe.a,{children:[Object(y.jsx)(se.a,{}),Ye.map((function(e){return Object(y.jsx)(se.a,{align:"right",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&n,children:Object(y.jsxs)(Qe.a,{active:r===e.id,direction:r===e.id?n:"asc",onClick:(i=e.id,function(e){a(e,i)}),children:[e.label,r===e.id?Object(y.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var i}))]})})}var Xe=Object(V.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:500},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})),Ke=function(e){var t=e.bikes,n=e.onBikeSelection,a=Xe(),i=Object(r.useState)("asc"),c=Object(b.a)(i,2),o=c[0],s=c[1],l=Object(r.useState)(""),u=Object(b.a)(l,2),d=u[0],j=u[1],h=Object(r.useState)([]),f=Object(b.a)(h,2),m=f[0],p=f[1],g=Object(r.useState)(0),x=Object(b.a)(g,2),v=x[0],k=x[1],S=Object(r.useState)(10),C=Object(b.a)(S,2),w=C[0],P=C[1],D=t.map((function(e){return function(e){return{id:e.bikeId,type:e.type,isElectric:e.isElectric?"Yes":"No",size:e.frameSize,location:e.rentalPoint.location,locationId:e.rentalPoint.id}}(e)})),T=w-Math.min(w,D.length-v*w);return Object(y.jsx)("div",{className:a.root,children:Object(y.jsxs)(O.a,{className:a.paper,children:[Object(y.jsx)(ae.a,{children:Object(y.jsxs)(ie.a,{className:a.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table",children:[Object(y.jsx)(Ze,{classes:a,order:o,orderBy:d,onRequestSort:function(e,t){s(d===t&&"asc"===o?"desc":"asc"),j(t)}}),Object(y.jsxs)(le.a,{children:[Ue(D,ze(o,d)).slice(v*w,v*w+w).map((function(e,t){var r,a=(r=e.id,-1!==m.indexOf(r)),i="enhanced-table-checkbox-".concat(t);return Object(y.jsxs)(oe.a,{hover:!0,onClick:function(t){return function(e,t){var r=m.indexOf(t),a=[];-1===r?a=a.concat(m,t):0===r?a=a.concat(m.slice(1)):r===m.length-1?a=a.concat(m.slice(0,-1)):r>0&&(a=a.concat(m.slice(0,r),m.slice(r+1))),p(a),n(a)}(0,e.id)},role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(y.jsx)(se.a,{padding:"checkbox",children:Object(y.jsx)(Me.a,{checked:a,inputProps:{"aria-labelledby":i}})}),Object(y.jsx)(se.a,{align:"right",component:"th",id:i,scope:"row",padding:"none",children:e.type}),Object(y.jsx)(se.a,{align:"right",children:e.isElectric}),Object(y.jsx)(se.a,{align:"right",children:e.size}),Object(y.jsx)(se.a,{align:"right",children:e.location})]},e.id)})),T>0&&Object(y.jsx)(oe.a,{children:Object(y.jsx)(se.a,{colSpan:6})})]})]})}),Object(y.jsx)(He.a,{rowsPerPageOptions:[5,10,25],component:"div",count:D.length,rowsPerPage:w,page:v,onPageChange:function(e,t){k(t)},onRowsPerPageChange:function(e){P(parseInt(e.target.value,10)),k(0)}})]})})},We=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),n=t[0],i=t[1],c=Object(r.useState)([]),o=Object(b.a)(c,2),s=o[0],l=o[1],u=Object(r.useState)({selectedBikes:[],selectedBikeType:"",isElectric:"",selectedFrameSize:"",rentFrom:"",rentTo:"",startDate:null,endDate:null}),h=Object(b.a)(u,2),f=h[0],m=h[1],p=Object(r.useState)(!0),g=Object(b.a)(p,2),x=g[0],v=g[1],k=a.a.useState(!1),S=Object(b.a)(k,2),C=S[0],w=S[1],P=a.a.useState({severity:"",message:""}),T=Object(b.a)(P,2),A=T[0],E=T[1];Object(r.useEffect)((function(){Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.getBikes(f.startDate);case 3:t=e.sent,i(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error:",e.t0);case 10:v(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[f.startDate]);var B=function(e,t){"clickaway"!==t&&w(!1)};return x?Object(y.jsx)(ye.a,{color:"secondary"}):Object(y.jsxs)(ge.a,{maxWidth:"lg",children:[Object(y.jsx)(D.a,{variant:"h4",component:"h4",pt:5,children:"Available bikes"}),Object(y.jsxs)(re.a,{container:!0,spacing:4,pt:5,children:[Object(y.jsx)(re.a,{item:!0,xs:3,children:Object(y.jsx)(O.a,{children:Object(y.jsx)(ke.a,{dateAdapter:ve.a,children:Object(y.jsx)(Fe,{bikes:n,formValues:f,onBikeTypeChange:function(e){m((function(t){return Object(pe.a)(Object(pe.a)({},t),{},{selectedBikeType:e.target.value})}))},onIsElectricSwitchChange:function(e){m((function(t){return Object(pe.a)(Object(pe.a)({},t),{},{isElectric:e.target.checked})}))},onFrameSizeChange:function(e){m((function(t){return Object(pe.a)(Object(pe.a)({},t),{},{selectedFrameSize:e.target.value})}))},onPickupLocationChange:function(e){m((function(t){return Object(pe.a)(Object(pe.a)({},t),{},{rentFrom:e.target.value})}))},onReturnLocationChange:function(e){m((function(t){return Object(pe.a)(Object(pe.a)({},t),{},{rentTo:e.target.value})}))},onStartDateChange:function(e){m((function(t){return Object(pe.a)(Object(pe.a)({},t),{},{startDate:e})}))},onEndDateChange:function(e){m((function(t){return Object(pe.a)(Object(pe.a)({},t),{},{endDate:e})}))},createReservationRequest:function(){var e=[];s.length>0?(s.forEach((function(t){var r={bike_id:t,plannedDateFrom:f.startDate,plannedDateTo:f.endDate,rentalPointFrom_id:n.find((function(e){return e.bikeId===t})).rentalPoint.id,rentalPointTo_id:f.rentTo};e.push(r)})),e.forEach((function(e){return W.postReservation(e)})),l([]),E({severity:"success",message:"Reservation created"}),w(!0)):(E({severity:"error",message:"Select bike"}),w(!0))}})})})}),Object(y.jsx)(re.a,{item:!0,xs:9,children:Object(y.jsx)(Ke,{bikes:function(e){var t={type:f.selectedBikeType,isElectric:f.isElectric,frameSize:f.selectedFrameSize,location:f.rentFrom};return e.filter((function(e){for(var n in e.location=e.rentalPoint.id,t)if(e[n]!==t[n]&&""!==t[n])return!1;return!0}))}(n),onBikeSelection:function(e){l(e)}})})]}),Object(y.jsx)(Se.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:C,autoHideDuration:5e3,onClose:B,TransitionComponent:function(e){return Object(y.jsx)(Ce.a,Object(pe.a)(Object(pe.a)({},e),{},{direction:"right"}))},children:Object(y.jsx)(xe.a,{onClose:B,severity:A.severity,children:A.message})})]})};function qe(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Je(e,t){return"desc"===e?function(e,n){return qe(e,n,t)}:function(e,n){return-qe(e,n,t)}}function Ve(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((function(e){return e[0]}))}var Ge=[{id:"userEmail",numeric:!1,disablePadding:!0,label:"Email"},{id:"bikeId",numeric:!0,disablePadding:!1,label:"Bike number"},{id:"actualDateFrom",numeric:!1,disablePadding:!1,label:"Rent date"},{id:"plannedDateTo",numeric:!1,disablePadding:!1,label:"Return by"},{id:"returnLocation",numeric:!1,disablePadding:!1,label:"Return to"}];function _e(e){var t=e.classes,n=e.order,r=e.orderBy,a=e.onRequestSort;return Object(y.jsx)(ce.a,{children:Object(y.jsxs)(oe.a,{children:[Object(y.jsx)(se.a,{}),Ge.map((function(e){return Object(y.jsx)(se.a,{align:"right",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&n,children:Object(y.jsxs)(Qe.a,{active:r===e.id,direction:r===e.id?n:"asc",onClick:(i=e.id,function(e){a(e,i)}),children:[e.label,r===e.id?Object(y.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var i}))]})})}var $e=Object(V.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:500},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})),et=function(e){var t=e.reservationRecords,n=e.onReservationSelection,a=$e(),i=Object(r.useState)("asc"),c=Object(b.a)(i,2),o=c[0],s=c[1],l=Object(r.useState)(""),u=Object(b.a)(l,2),d=u[0],j=u[1],h=Object(r.useState)([]),f=Object(b.a)(h,2),m=f[0],p=f[1],g=Object(r.useState)(0),x=Object(b.a)(g,2),v=x[0],k=x[1],S=Object(r.useState)(10),C=Object(b.a)(S,2),w=C[0],P=C[1],D=t,T=w-Math.min(w,D.length-v*w);return Object(y.jsx)("div",{className:a.root,children:Object(y.jsxs)(O.a,{className:a.paper,children:[Object(y.jsx)(ae.a,{children:Object(y.jsxs)(ie.a,{className:a.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table",children:[Object(y.jsx)(_e,{classes:a,order:o,orderBy:d,onRequestSort:function(e,t){s(d===t&&"asc"===o?"desc":"asc"),j(t)}}),Object(y.jsxs)(le.a,{children:[Ve(D,Je(o,d)).slice(v*w,v*w+w).map((function(e,t){var r,a=(r=e.id,-1!==m.indexOf(r)),i="enhanced-table-checkbox-".concat(t);return Object(y.jsxs)(oe.a,{hover:!0,onClick:function(t){return function(e,t){var r=m.indexOf(t),a=[];-1===r?a=a.concat(m,t):0===r?a=a.concat(m.slice(1)):r===m.length-1?a=a.concat(m.slice(0,-1)):r>0&&(a=a.concat(m.slice(0,r),m.slice(r+1))),p(a),n(a)}(0,e.id)},role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(y.jsx)(se.a,{padding:"checkbox",children:Object(y.jsx)(Me.a,{checked:a,inputProps:{"aria-labelledby":i}})}),Object(y.jsx)(se.a,{align:"right",component:"th",id:i,scope:"row",padding:"none",children:e.userEmail}),Object(y.jsx)(se.a,{align:"right",children:e.bikeId}),Object(y.jsx)(se.a,{align:"right",children:e.actualDateFrom}),Object(y.jsx)(se.a,{align:"right",children:e.plannedDateTo}),Object(y.jsx)(se.a,{align:"right",children:e.returnLocation})]},e.id)})),T>0&&Object(y.jsx)(oe.a,{children:Object(y.jsx)(se.a,{colSpan:6})})]})]})}),Object(y.jsx)(He.a,{rowsPerPageOptions:[5,10,25],component:"div",count:D.length,rowsPerPage:w,page:v,onPageChange:function(e,t){k(t)},onRowsPerPageChange:function(e){P(parseInt(e.target.value,10)),k(0)}})]})})},tt=n(325),nt=Object(V.a)({root:{minWidth:120,padding:10,height:"100%",display:"flex",flexDirection:"Column"}}),rt=function(e){var t=e.picklistData,n=e.filterValues,a=e.onReturnLocationChange,i=e.onBikeNumberChange,c=e.handleConfirmReturn,o=nt();var s=Object(r.useState)({rentToLocation:!1}),l=Object(b.a)(s,2),u=l[0],d=l[1],j={options:Object(we.a)(t.bikeIds),getOptionLabel:function(e){return e}};return Object(y.jsxs)(T.a,{className:o.root,children:[Object(y.jsxs)(m.a,{required:!0,error:u.rentToLocation,children:[Object(y.jsx)(p.a,{id:"return-to-select",children:"Return location"}),Object(y.jsx)(Pe.a,{labelId:"return-to-select",id:"return-to-select",value:n.rentToLocation,onChange:a,children:t.points.map((function(e){return t=e,Object(y.jsx)(Re.a,{value:t.id,children:t.location},t.id);var t}))}),u.rentToLocation&&Object(y.jsx)(x.a,{children:"Select your rental point"})]}),Object(y.jsx)(tt.a,Object(pe.a)(Object(pe.a)({},j),{},{autoComplete:!0,autoHighlight:!0,id:"bike-number",onChange:function(e,t){i(t)},renderInput:function(e){return Object(y.jsx)(P.a,Object(pe.a)(Object(pe.a)({},e),{},{label:"Bike number",margin:"normal",variant:"standard"}))}})),Object(y.jsx)(E.a,{variant:"contained",color:"primary",onClick:function(){n.rentToLocation?(d({rentToLocation:!1}),c()):d({rentToLocation:!0})},children:"Return bike"})]})},at=n(172),it=n(323),ct=function(e,t){return{points:e.map((function(e){return{id:e._id,location:e.location}})),bikeIds:t.map((function(e){return e.bikeId}))}},ot=function(){var e=Object(r.useState)(!0),t=Object(b.a)(e,2),n=t[0],i=t[1],c=a.a.useState(!1),o=Object(b.a)(c,2),s=o[0],l=o[1],u=a.a.useState({severity:"",message:""}),d=Object(b.a)(u,2),j=d[0],h=d[1],f=Object(r.useState)([]),m=Object(b.a)(f,2),p=m[0],g=m[1],x=Object(r.useState)([]),v=Object(b.a)(x,2),k=v[0],S=v[1],C=Object(r.useState)([]),w=Object(b.a)(C,2),P=w[0],T=w[1],A=Object(r.useState)({rentToLocation:"",bikeNumber:""}),E=Object(b.a)(A,2),B=E[0],I=E[1];Object(r.useEffect)((function(){W.getRentalPoints().then((function(e){T(e)}))}),[]),Object(r.useEffect)((function(){P.length&&W.getPresentRents().then((function(e){g(function(e,t){var n=[];return e.forEach((function(e){var r={id:e.id,userEmail:e.user_id.email,bikeId:e.bike_id,actualDateFrom:Object(at.a)(Object(it.a)(e.actualDateFrom),"dd MMM yyyy hh:mm"),plannedDateTo:Object(at.a)(Object(it.a)(e.plannedDateTo),"dd MMM yyyy hh:mm"),returnLocation:t.find((function(t){return t._id===e.rentalPointTo_id})).location};n.push(r)})),n}(e,P))})).then(i(!1))}),[P]);var R=function(e,t){"clickaway"!==t&&l(!1)};return n?Object(y.jsx)(ye.a,{color:"secondary"}):Object(y.jsxs)(ge.a,{maxWidth:"lg",children:[Object(y.jsx)(D.a,{variant:"h4",component:"h4",pt:5,children:"Rented bikes"}),Object(y.jsxs)(re.a,{container:!0,spacing:4,pt:5,children:[Object(y.jsx)(re.a,{item:!0,xs:3,children:Object(y.jsx)(O.a,{children:Object(y.jsx)(ke.a,{dateAdapter:ve.a,children:Object(y.jsx)(rt,{picklistData:ct(P,p),filterValues:B,onReturnLocationChange:function(e){I((function(t){return Object(pe.a)(Object(pe.a)({},t),{},{rentToLocation:e.target.value})}))},onBikeNumberChange:function(e){e||(e=""),I((function(t){return Object(pe.a)(Object(pe.a)({},t),{},{bikeNumber:e})}))},handleConfirmReturn:function(){k.length?(k.forEach((function(e){W.returnBike(B.rentToLocation,e).then(g(p.filter((function(t){return t.id!==e}))))})),S([]),h({severity:"success",message:"Bike returned"}),l(!0)):(h({severity:"error",message:"Select bike"}),l(!0))}})})})}),Object(y.jsx)(re.a,{item:!0,xs:9,children:Object(y.jsx)(et,{reservationRecords:function(e){var t={bikeId:B.bikeNumber};return e.filter((function(e){for(var n in t)if(e[n]!==t[n]&&""!==t[n])return!1;return!0}))}(p),onReservationSelection:function(e){S(e)}})})]}),Object(y.jsx)(Se.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:s,autoHideDuration:5e3,onClose:R,TransitionComponent:function(e){return Object(y.jsx)(Ce.a,Object(pe.a)(Object(pe.a)({},e),{},{direction:"right"}))},children:Object(y.jsx)(xe.a,{onClose:R,severity:j.severity,children:j.message})})]})},st=n(228),lt=function(e){var t=e.children,n=e.roles,a=Object(st.a)(e,["children","roles"]),i=Object(r.useState)(null),c=Object(b.a)(i,2),o=c[0],l=c[1];return Object(r.useEffect)((function(){l(W.profile)}),[]),Object(y.jsx)(s.b,Object(pe.a)(Object(pe.a)({},a),{},{render:function(e){return W.userHasAuthenticated()?null===o?"":o?n.includes(o.role)?t:"Forbidden":"Unauthorized":Object(y.jsx)(s.a,{to:{pathname:"/login"}})}}))},ut=function(){var e=Object(s.g)();return Object(r.useEffect)((function(){W.logout(),e.push("/")}),[]),""},dt=n(360),jt=function(){return Object(y.jsxs)(dt.a,{children:[Object(y.jsx)(o.b,{to:"/",children:Object(y.jsx)(E.a,{children:"Home"})}),Object(y.jsx)(o.b,{to:"/login",children:Object(y.jsx)(E.a,{children:"Login"})}),Object(y.jsx)(o.b,{to:"/register",children:Object(y.jsx)(E.a,{children:" Register"})})]})},bt=function(){return Object(y.jsxs)(dt.a,{children:[Object(y.jsx)(o.b,{to:"/",children:Object(y.jsx)(E.a,{children:"Home"})}),Object(y.jsx)(o.b,{to:"/logout",children:Object(y.jsx)(E.a,{children:"Logout"})}),Object(y.jsx)(o.b,{to:"/user/reservations",children:Object(y.jsx)(E.a,{children:"My reservations"})}),Object(y.jsx)(o.b,{to:"/reservations",children:Object(y.jsx)(E.a,{children:"Create Reservation"})})]})},ht=function(){return Object(y.jsxs)(dt.a,{children:[Object(y.jsx)(o.b,{to:"/",children:Object(y.jsx)(E.a,{children:"Home"})}),Object(y.jsx)(o.b,{to:"/logout",children:Object(y.jsx)(E.a,{children:"Logout"})}),Object(y.jsx)(o.b,{to:"/rental_point/reservations",children:Object(y.jsx)(E.a,{children:"Reservations"})}),Object(y.jsx)(o.b,{to:"/returnBikes",children:Object(y.jsx)(E.a,{children:"Returns"})}),Object(y.jsx)(o.b,{to:"/rentBikes",children:Object(y.jsx)(E.a,{children:"Rents"})})]})},Ot=function(){var e=Object(r.useState)(!1),t=Object(b.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)({}),c=Object(b.a)(i,2),o=c[0],s=c[1];function l(){a(W.userHasAuthenticated()),s(W.profile.role)}return Object(r.useEffect)((function(){return W.registerObserver(l),a(W.userHasAuthenticated()),s(W.profile.role),function(){W.removeObserver(l)}}),[]),n?"User"===o?Object(y.jsx)(bt,{}):Object(y.jsx)(ht,{}):Object(y.jsx)(jt,{})};function ft(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function mt(e,t){return"desc"===e?function(e,n){return ft(e,n,t)}:function(e,n){return-ft(e,n,t)}}function pt(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((function(e){return e[0]}))}var gt=[{id:"userEmail",numeric:!1,disablePadding:!0,label:"Email"},{id:"bikeId",numeric:!0,disablePadding:!1,label:"Bike number"},{id:"onStock",numeric:!0,disablePadding:!0,label:"Bike on stock"},{id:"plannedDateFrom",numeric:!1,disablePadding:!1,label:"Reservation date"},{id:"plannedDateTo",numeric:!1,disablePadding:!1,label:"Return by"},{id:"returnLocation",numeric:!1,disablePadding:!1,label:"Return to"}];function xt(e){var t=e.classes,n=e.order,r=e.orderBy,a=e.onRequestSort;return Object(y.jsx)(ce.a,{children:Object(y.jsxs)(oe.a,{children:[Object(y.jsx)(se.a,{}),gt.map((function(e){return Object(y.jsx)(se.a,{align:"right",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&n,children:Object(y.jsxs)(Qe.a,{active:r===e.id,direction:r===e.id?n:"asc",onClick:(i=e.id,function(e){a(e,i)}),children:[e.label,r===e.id?Object(y.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var i}))]})})}var vt,kt=Object(V.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:500},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})),yt=function(e){var t=e.reservationRecords,n=e.onReservationSelection,a=kt(),i=Object(r.useState)("asc"),c=Object(b.a)(i,2),o=c[0],s=c[1],l=Object(r.useState)(""),u=Object(b.a)(l,2),d=u[0],j=u[1],h=Object(r.useState)([]),f=Object(b.a)(h,2),m=f[0],p=f[1],g=Object(r.useState)(0),x=Object(b.a)(g,2),v=x[0],k=x[1],S=Object(r.useState)(10),C=Object(b.a)(S,2),w=C[0],P=C[1],D=t,T=w-Math.min(w,D.length-v*w);return Object(y.jsx)("div",{className:a.root,children:Object(y.jsxs)(O.a,{className:a.paper,children:[Object(y.jsx)(ae.a,{children:Object(y.jsxs)(ie.a,{className:a.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table",children:[Object(y.jsx)(xt,{classes:a,order:o,orderBy:d,onRequestSort:function(e,t){s(d===t&&"asc"===o?"desc":"asc"),j(t)}}),Object(y.jsxs)(le.a,{children:[pt(D,mt(o,d)).slice(v*w,v*w+w).map((function(e,t){var r,a=(r=e.id,-1!==m.indexOf(r)),i="enhanced-table-checkbox-".concat(t);return Object(y.jsxs)(oe.a,{hover:!0,onClick:function(t){return function(e,t){var r=m.indexOf(t),a=[];-1===r?a=a.concat(m,t):0===r?a=a.concat(m.slice(1)):r===m.length-1?a=a.concat(m.slice(0,-1)):r>0&&(a=a.concat(m.slice(0,r),m.slice(r+1))),p(a),n(a)}(0,e.id)},role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(y.jsx)(se.a,{padding:"checkbox",children:Object(y.jsx)(Me.a,{checked:a,inputProps:{"aria-labelledby":i}})}),Object(y.jsx)(se.a,{align:"right",component:"th",id:i,scope:"row",padding:"none",children:e.userEmail}),Object(y.jsx)(se.a,{align:"right",children:e.bikeId}),Object(y.jsx)(se.a,{align:"right",children:e.onStock}),Object(y.jsx)(se.a,{align:"right",children:e.plannedDateFrom}),Object(y.jsx)(se.a,{align:"right",children:e.plannedDateTo}),Object(y.jsx)(se.a,{align:"right",children:e.returnLocation})]},e.id)})),T>0&&Object(y.jsx)(oe.a,{children:Object(y.jsx)(se.a,{colSpan:6})})]})]})}),Object(y.jsx)(He.a,{rowsPerPageOptions:[5,10,25],component:"div",count:D.length,rowsPerPage:w,page:v,onPageChange:function(e,t){k(t)},onRowsPerPageChange:function(e){P(parseInt(e.target.value,10)),k(0)}})]})})},St=n(324),Ct=Object(V.a)({root:{minWidth:120,padding:10,height:"100%",display:"flex",flexDirection:"Column"}}),wt=function(e){var t=e.picklistData,n=e.filterValues,r=e.onPickupLocationChange,a=e.onEmailChange,i=e.onStartDateChange,c=e.handleConfirmRent,o=Ct();var s={options:Object(we.a)(t.userEmails),getOptionLabel:function(e){return e}};return Object(y.jsxs)(T.a,{className:o.root,children:[Object(y.jsxs)(m.a,{children:[Object(y.jsx)(p.a,{id:"rent-from-select",children:"Pickup location"}),Object(y.jsx)(Pe.a,{labelId:"rent-from-select",id:"rent-from-select",value:n.rentFrom,onChange:r,children:t.points.map((function(e){return t=e,Object(y.jsx)(Re.a,{value:t.id,children:t.location});var t}))})]}),Object(y.jsx)(tt.a,Object(pe.a)(Object(pe.a)({},s),{},{autoComplete:!0,autoHighlight:!0,id:"customer-email-select",onChange:function(e,t){a(t)},renderInput:function(e){return Object(y.jsx)(P.a,Object(pe.a)(Object(pe.a)({},e),{},{label:"Customer email",margin:"normal",variant:"standard"}))}})),Object(y.jsx)(Ae.a,{utils:Be.a,children:Object(y.jsx)(St.a,{label:"Reservation start date",value:n.plannedDateFrom,onChange:i,showTodayButton:!0,clearable:!0,autoOk:!0,format:"dd MMMM yy",margin:"normal",inputVariant:"standard"})}),Object(y.jsx)(E.a,{variant:"contained",color:"primary",onClick:c,children:"Confirm rent"})]})},Pt=function(e,t){return{points:e.map((function(e){return{id:e._id,location:e.location}})),userEmails:new Set(t.map((function(e){return e.userEmail})))}},Dt=function(){var e=Object(r.useState)(!0),t=Object(b.a)(e,2),n=t[0],i=t[1],c=a.a.useState(!1),o=Object(b.a)(c,2),s=o[0],l=o[1],u=a.a.useState({severity:"",message:""}),d=Object(b.a)(u,2),j=d[0],h=d[1],f=Object(r.useState)([]),m=Object(b.a)(f,2),p=m[0],g=m[1],x=Object(r.useState)([]),v=Object(b.a)(x,2),k=v[0],S=v[1],C=Object(r.useState)([]),w=Object(b.a)(C,2),P=w[0],T=w[1],A=Object(r.useState)({rentFromLocation:"",userEmail:"",plannedDateFrom:null}),E=Object(b.a)(A,2),B=E[0],I=E[1];Object(r.useEffect)((function(){W.getRentalPoints().then((function(e){T(e)}))}),[]),Object(r.useEffect)((function(){P.length&&W.getReservations().then((function(e){g(function(e,t){if(!e)return{};var n=[];return e.forEach((function(e){var r=t.find((function(t){return t._id===e.rentalPointFrom_id})).bicycle_id,a=e.id,i=e.user_id.email,c=e.bike_id,o=r.includes(e.bike_id)?"Yes":"No",s=Object(at.a)(Object(it.a)(e.plannedDateFrom),"dd MMM yyyy hh:mm"),l=Date.parse(s.toString().substring(0,11)),u={id:a,userEmail:i,bikeId:c,onStock:o,plannedDateFrom:s,parsedReservationDate:l,plannedDateTo:Object(at.a)(Object(it.a)(e.plannedDateTo),"dd MMM yyyy hh:mm"),rentFromLocationId:e.rentalPointFrom_id,rentFromLocation:t.find((function(t){return t._id===e.rentalPointFrom_id})).location,returnLocation:t.find((function(t){return t._id===e.rentalPointTo_id})).location};n.push(u)})),n}(e,P))})).then(i(!1))}),[P]);var R=function(e,t){"clickaway"!==t&&l(!1)};return n?Object(y.jsx)(ye.a,{color:"secondary"}):Object(y.jsxs)(ge.a,{maxWidth:"lg",children:[Object(y.jsx)(D.a,{variant:"h4",component:"h4",pt:5,children:"Current reservations"}),Object(y.jsxs)(re.a,{container:!0,spacing:4,pt:5,children:[Object(y.jsx)(re.a,{item:!0,xs:3,children:Object(y.jsx)(O.a,{children:Object(y.jsx)(ke.a,{dateAdapter:ve.a,children:Object(y.jsx)(wt,{picklistData:Pt(P,p),filterValues:B,onPickupLocationChange:function(e){I((function(t){return Object(pe.a)(Object(pe.a)({},t),{},{rentFromLocation:e.target.value})}))},onStartDateChange:function(e){I((function(t){return Object(pe.a)(Object(pe.a)({},t),{},{plannedDateFrom:e})}))},onEmailChange:function(e){e||(e=""),I((function(t){return Object(pe.a)(Object(pe.a)({},t),{},{userEmail:e})}))},handleConfirmRent:function(e){e.preventDefault(),0!==k.length?(k.forEach((function(e){W.confirmRent(e).then(g(p.filter((function(t){return t.id!==e}))))})),S([]),h({severity:"success",message:"Rents confirmed"}),l(!0)):(h({severity:"error",message:"Select reservation"}),l(!0))}})})})}),Object(y.jsx)(re.a,{item:!0,xs:9,children:Object(y.jsx)(yt,{reservationRecords:function(e){var t={rentFromLocationId:B.rentFromLocation,userEmail:B.userEmail,parsedReservationDate:B.plannedDateFrom?Date.parse(B.plannedDateFrom.toString().substring(0,15)):""};return e.filter((function(e){for(var n in t)if(e[n]!==t[n]&&""!==t[n])return!1;return!0}))}(p),onReservationSelection:function(e){S(e)}})})]}),Object(y.jsx)(Se.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:s,autoHideDuration:5e3,onClose:R,TransitionComponent:function(e){return Object(y.jsx)(Ce.a,Object(pe.a)(Object(pe.a)({},e),{},{direction:"right"}))},children:Object(y.jsx)(xe.a,{onClose:R,severity:j.severity,children:j.message})})]})},Tt=Object(V.a)((function(e){return{container:{backgroundColor:e.palette.background.default}}})),At=function(){var e=Tt(F);return Object(y.jsx)(l.a,{theme:F,children:Object(y.jsx)("div",{className:e.container,children:Object(y.jsxs)(o.a,{children:[Object(y.jsx)(Ot,{}),Object(y.jsxs)(s.d,{children:[Object(y.jsx)(s.b,{path:"/login",children:Object(y.jsx)($,{})}),Object(y.jsx)(s.b,{path:"/register",children:Object(y.jsx)(ne,{})}),Object(y.jsx)(lt,{roles:["User"],path:"/user/reservations",children:Object(y.jsx)(he,{})}),Object(y.jsx)(lt,{roles:["User","Admin"],path:"/rental_point/reservations",children:Object(y.jsx)(me,{})}),Object(y.jsx)(s.b,{path:"/logout",children:Object(y.jsx)(ut,{})}),Object(y.jsx)(lt,{roles:["User"],path:"/reservations",children:Object(y.jsx)(We,{})}),Object(y.jsx)(lt,{roles:["Admin"],path:"/rentBikes",children:Object(y.jsx)(Dt,{})}),Object(y.jsx)(lt,{roles:["Admin"],path:"/returnBikes",children:Object(y.jsx)(ot,{})})]})]})})})};c.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(At,{})}),document.getElementById("root")),vt&&vt instanceof Function&&n.e(3).then(n.bind(null,365)).then((function(e){var t=e.getCLS,n=e.getFID,r=e.getFCP,a=e.getLCP,i=e.getTTFB;t(vt),n(vt),r(vt),a(vt),i(vt)}))}},[[261,1,2]]]);
//# sourceMappingURL=main.04e496ba.chunk.js.map